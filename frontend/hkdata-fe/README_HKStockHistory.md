# 港股历史交易数据查询功能

## 功能概述

港股历史交易数据查询功能提供了一个完整的界面来查询和展示港股的历史交易数据，包括K线图表、统计数据、历史明细等。

## 访问方式

1. 启动前端服务：`npm run dev`
2. 在浏览器中访问：`http://localhost:5173/hk-stock-history`
3. 或者通过顶部导航菜单点击"港股历史交易"

## 主要功能

### 1. 查询条件设置

- **股票代码输入**：支持输入港股代码，格式如 `00700.HK`（腾讯控股）
- **日期范围选择**：支持自定义日期范围查询
- **快捷日期选择**：提供近7天、30天、3个月、6个月、1年的快捷选择

### 2. 数据展示

#### 统计信息卡片
- 总交易日数
- 最高价/最低价
- 最新价格（含涨跌幅）
- 平均价格
- 总成交量
- 上涨/下跌天数统计

#### K线图表
- 完整的K线走势图
- 成交量柱状图
- 支持缩放和拖动
- 鼠标悬停显示详细数据

#### 历史数据表格
- 完整的交易数据明细
- 包含开盘价、收盘价、最高价、最低价
- 涨跌幅、成交量、成交额、换手率等信息
- 支持排序和分页

### 3. 支持的股票代码

常见的港股代码示例：
- `00700.HK` - 腾讯控股
- `09988.HK` - 阿里巴巴
- `03690.HK` - 美团
- `01810.HK` - 小米集团
- `02318.HK` - 中国平安

## 使用步骤

### 基本查询
1. 在股票代码输入框中输入港股代码（如：00700.HK）
2. 选择查询的日期范围
3. 点击"查询"按钮
4. 等待数据加载完成

### 快捷查询
1. 输入股票代码
2. 点击快捷日期按钮（如"近30天"）
3. 系统自动查询并显示结果

### 数据解读
- **红色**：表示上涨
- **绿色**：表示下跌
- **K线图**：红色蜡烛表示收盘价高于开盘价，绿色表示相反
- **成交量**：柱状图显示每日成交量

## 技术特性

### 前端技术栈
- Vue 3 + Composition API
- Element Plus UI组件库
- ECharts图表库
- Axios HTTP客户端

### 后端API
- 接口地址：`http://localhost:3000/api/hk-stock/history`
- 请求方法：GET
- 参数：
  - `code`: 股票代码
  - `startDate`: 开始日期（YYYY-MM-DD）
  - `endDate`: 结束日期（YYYY-MM-DD）

### 数据流程
1. 前端发送查询请求到后端
2. 后端首先检查数据库中是否有数据
3. 如果数据库中没有数据，自动调用爬虫服务获取
4. 将数据保存到数据库并返回给前端
5. 前端展示数据和图表

## 错误处理

### 常见错误及解决方案

1. **"请填写完整的查询条件"**
   - 确保输入了股票代码和日期范围

2. **"请输入正确的港股代码格式"**
   - 确保股票代码包含 `.HK` 后缀
   - 例如：`00700.HK` 而不是 `00700`

3. **"网络请求失败"**
   - 检查后端服务是否启动
   - 确认API地址是否正确

4. **"获取数据失败"**
   - 可能是股票代码不存在
   - 或者指定日期范围内没有交易数据

## 性能优化

- 数据缓存：查询过的数据会保存在数据库中，提高查询速度
- 懒加载：图表和数据表格按需加载
- 响应式设计：支持不同屏幕尺寸

## 注意事项

1. **股票代码格式**：必须包含 `.HK` 后缀
2. **日期范围**：建议查询范围不要超过1年，以保证性能
3. **网络连接**：首次查询新股票时可能需要较长时间
4. **数据更新**：历史数据相对稳定，但最新数据可能有延迟

## 扩展功能

未来可能添加的功能：
- 多股票对比
- 技术指标计算
- 数据导出功能
- 自定义图表样式
- 实时数据更新 